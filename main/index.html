<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<header>
    <nav>
      <a href = "index.html"> 
      <img src = "images/cube.jpg" alt="Gachon University Logo" class="logo"></a>  
        <li> <a href = "../scholarship system/scholarship_in.html"> ì¥í•™ì œë„ </a> </li>
        <li> <a href = "../curriculum/curriculum.html"> êµìœ¡ê³¼ì • </a> </li>
        <li> <a href = "../professor/index.html"> êµìˆ˜ì§„ </a> </li>
        <li> <a href = "../AI_introduce/index.html"> AI ê³µí•™ê´€ </a> </li>
        <li> <a href = "../price/index_price.html"> ì—°êµ¬ì„±ê³¼ </a> </li>
    </nav>
</header>
<body>
    <section>
        <div class = campus>
            <a href = "index.html" >
                <img src = "images/Campus.jpg" alt="Campus Image">
            </a>
            <div class = overlay>
                <h2> ì•„ë¦„ë‹¤ìš´ ì¸ì¬ì˜ ìƒ˜, </h2>
                <h1> ê°€ì²œëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ê³¼ </h1>
            </div> 
        </div>
    </section>
    <section class = category>
        <div> 
            <h3> ì¥í•™ì œë„ </h3>
            <a href = "ì¥í•™ì œë„">
                <img src = "images/scholarship.png" alt="Scholarship Image">
            </a>
        </div>
        <div>
            <h3> êµìœ¡ê³¼ì • </h3>
            <a href = "êµìœ¡ê³¼ì •">
                <img src = "images/curriculum.png" alt="Curriculum Image">
            </a>
        </div>
        <div>
            <h3> êµìˆ˜ì§„ </h3>
            <a href = "êµìˆ˜ì§„">
                <img src = "images/professor.png" alt="Professor Image">
            </a>
        </div> 
    </section>
    <section class = "calander">
     <title> ì»´í“¨í„°ê³µí•™ê³¼ ì£¼ìš” ì¼ì • </title>
    <!-- ì™¸ë¶€ ê³µìš© ìŠ¤íƒ€ì¼ -->
    <style>
    /* í˜ì´ì§€ ë³´ì¡° ìŠ¤íƒ€ì¼ (í•„ìš” ìµœì†Œí•œ) */
    :root{ --border:#e5e7eb; --brand:#3b82f6; }
    body{ margin:0; font-family:'Noto Sans KR',system-ui,Segoe UI,Roboto,sans-serif; }
    .container{ max-width:1000px; margin:24px auto; padding:0 16px; }

    .toolbar{ display:flex; align-items:center; gap:8px; justify-content:space-between; margin:12px 0 16px; }
    .cal-head{ display:flex; align-items:center; gap:10px; }
    .cal-head h2{ margin:0; font-size:20px; }

    .grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:6px; }
    .dow{ font-weight:600; font-size:12px; color:#64748b; text-align:center; padding:6px 0; }

    .cell{ background:#fff; border:1px solid var(--border); min-height:90px; border-radius:10px; padding:6px; position:relative; }
    .cell .d{ font-size:12px; color:#334155; }
    /* âœ… ì£¼ë§ ë‚ ì§œ ìƒ‰ìƒ */
    .cell.sun .d{ color:#ef4444; } /* ì¼ìš”ì¼ ë¹¨ê°• */
    .cell.sat .d{ color:#2563eb; } /* í† ìš”ì¼ íŒŒë‘ */

    .cell .bullets{ position:absolute; left:6px; bottom:6px; display:flex; gap:4px; align-items:center; }
    .dot{ width:7px; height:7px; border-radius:999px; display:inline-block; border:1px solid rgba(0,0,0,.06); }
    .more{ font-size:11px; color:#64748b; }
    .today{ outline:2px solid #94a3b8; }
    .muted{ color:#cbd5e1; }

    .panel{ margin-top:16px; display:grid; grid-template-columns: 2fr 1fr; gap:14px; }
    .card{ background:#fff; border:1px solid var(--border); border-radius:12px; padding:12px; }
    .card h3{ margin:0 0 8px; font-size:16px; }

    .events{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:10px; }
    .events li{ border:1px solid var(--border); border-radius:10px; padding:8px 10px; display:grid; grid-template-columns:72px 1fr auto; align-items:center; gap:8px; }
    .events .when{ font-size:12px; color:#0f172a; display:flex; align-items:center; gap:6px; }
    .events .what{ font-weight:600; }
    .events .where{ font-size:12px; color:#64748b; }
    .tag{ font-size:12px; background:#f1f5f9; padding:2px 8px; border-radius:999px; }

    .btn{ appearance:none; border:1px solid var(--border); background:#fff; border-radius:10px; padding:8px 12px; cursor:pointer; }
    .btn.primary{ background:var(--brand); color:#fff; border-color:transparent; }

    dialog#editor{ border:none; border-radius:16px; padding:0; width:min(560px, 92vw); }
    .dlg{ padding:16px; }
    .dlg h4{ margin:0 0 10px; }
    .row{ display:grid; grid-template-columns: 120px 1fr; align-items:center; gap:10px; margin:10px 0; }
    .row input, .row select{ width:100%; padding:10px; border:1px solid var(--border); border-radius:10px; font-size:14px; }
    .row label{ color:#334155; font-size:14px; }
    .form-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:8px; }

    /* ğŸ¨ ìƒ‰ ì„ íƒ UI (ë³´ì¡°) */
    .color-row{ display:flex; align-items:center; gap:10px; flex-wrap:wrap }
    .color-chip{ width:22px; height:22px; border-radius:999px; border:1px solid var(--border); cursor:pointer; display:inline-block; }
    .color-chip[aria-pressed="true"]{ outline:2px solid var(--brand); outline-offset:2px }
    .color-picker{ display:flex; align-items:center; gap:10px }
    .event .swatch, .events .swatch{ width:10px; height:10px; border-radius:999px; display:inline-block; border:1px solid rgba(0,0,0,.08); }
  </style>

  <div class="container">
    <div class="toolbar">
      <div class="cal-head">
        <button class="btn" id="prev">â—€</button>
        <h2 id="title"></h2>
        <button class="btn" id="next">â–¶</button>
      </div>
      <div>
        <button class="btn" id="todayBtn">ì˜¤ëŠ˜ë¡œ</button>
        <button class="btn primary" id="addBtn">ì¼ì • ì¶”ê°€</button>
      </div>
    </div>

    <div class="grid" id="dow">
      <div class="dow">ì¼</div><div class="dow">ì›”</div><div class="dow">í™”</div><div class="dow">ìˆ˜</div><div class="dow">ëª©</div><div class="dow">ê¸ˆ</div><div class="dow">í† </div>
    </div>
    <div class="grid" id="cal"></div>

    <div class="panel">
      <div class="card">
        <h3 id="dayTitle">ì¼ì •</h3>
        <ul id="dayList" class="events"></ul>
      </div>
      <div class="card">
        <h3>Cube Memo</h3>
        <p>ì½”ë”©ì€ ë„ˆëª¨ ì–´ë µë‹¤ . . . </p>
      </div>
    </div>
  </div>

  <!-- í¸ì§‘ê¸° ë‹¤ì´ì–¼ë¡œê·¸ -->
  <dialog id="editor">
    <form id="editorForm" method="dialog">
      <div class="dlg">
        <h4>ì¼ì • í¸ì§‘</h4>
        <input type="hidden" id="f_id" />
        <div class="row"><label for="f_date">ë‚ ì§œ</label><input id="f_date" type="date" required></div>
        <div class="row"><label for="f_time">ì‹œê°„</label><input id="f_time" type="time" placeholder="19:00"></div>
        <div class="row"><label for="f_title">ì œëª©</label><input id="f_title" type="text" placeholder="ë¬´ì—‡ì„ í•˜ë‚˜ìš”?" required></div>
        <div class="row"><label for="f_where">ì¥ì†Œ</label><input id="f_where" type="text" placeholder="ì–´ë””ì„œ í•˜ë‚˜ìš”?"></div>
        <div class="row"><label for="f_tag">íƒœê·¸</label><input id="f_tag" type="text" placeholder="ì˜ˆ: í•©ì£¼, ê³µì—°, ë§ˆê°"></div>

        <!-- ìƒ‰ìƒ ì„ íƒ -->
        <div class="row">
          <label>ìƒ‰ìƒ</label>
          <div>
            <div class="color-picker" style="margin-bottom:8px;">
              <input id="f_color" type="color" value="#2563eb" style="width:44px; height:36px; border-radius:8px; border:1px solid var(--border); padding:0;" />
            </div>
            <div class="color-row" aria-label="ì¶”ì²œ ìƒ‰ìƒ">
              <button class="color-chip" type="button" data-color="#2563eb" title="ë¸”ë£¨"></button>
              <button class="color-chip" type="button" data-color="#60a5fa" title="ë¼ì´íŠ¸ ë¸”ë£¨"></button>
              <button class="color-chip" type="button" data-color="#22c55e" title="ê·¸ë¦°"></button>
              <button class="color-chip" type="button" data-color="#eab308" title="ì˜ë¡œ"></button>
              <button class="color-chip" type="button" data-color="#f97316" title="ì˜¤ë Œì§€"></button>
              <button class="color-chip" type="button" data-color="#ef4444" title="ë ˆë“œ"></button>
              <button class="color-chip" type="button" data-color="#a855f7" title="í¼í”Œ"></button>
              <button class="color-chip" type="button" data-color="#14b8a6" title="í‹°ì–¼"></button>
            </div>
          </div>
        </div>

        <fieldset style="border:1px solid var(--border); border-radius:12px; padding:8px; margin-top:10px;">
          <legend style="padding:0 6px; color:#334155; font-size:12px;">ë°˜ë³µ</legend>
          <div class="row">
            <label for="f_freq">ë¹ˆë„</label>
            <select id="f_freq">
              <option value="NONE">ì—†ìŒ</option>
              <option value="DAILY">ë§¤ì¼</option>
              <option value="WEEKLY">ë§¤ì£¼</option>
              <option value="MONTHLY">ë§¤ì›”</option>
            </select>
          </div>
          <div class="row"><label for="f_interval">ê°„ê²©</label><input id="f_interval" type="number" min="1" value="1"></div>
          <div class="row"><label for="f_until">ì¢…ë£Œì¼</label><input id="f_until" type="date"></div>
        </fieldset>

        <div class="form-actions">
          <button class="btn" type="button" id="delBtn">ì‚­ì œ</button>
          <div style="flex:1"></div>
          <button class="btn" value="cancel" type="reset">ì·¨ì†Œ</button>
          <button class="btn primary" value="default" type="submit">ì €ì¥</button>
        </div>
      </div>
    </form>
  </dialog>

  <script>
  // ===== Utils =====
  const $ = (s, r=document)=>r.querySelector(s);
  const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));
  const pad2 = n => String(n).padStart(2,'0');
  const toDateId = d => `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())}`;

  // íƒœê·¸ í…ìŠ¤íŠ¸ì— ë”°ë¥¸ ê¸°ë³¸ ìƒ‰ìƒ (ì—†ìœ¼ë©´ ë¸”ë£¨)
  function mapTagToColor(tag){
    const t = (tag||'').toLowerCase();
    if(t.includes('ê³µì—°')) return '#ef4444';
    if(t.includes('í•©ì£¼')) return '#2563eb';
    if(t.includes('ë³´ì»¬')||t.includes('íŠ¸ë ˆì´ë‹')) return '#22c55e';
    if(t.includes('ë§ˆê°')||t.includes('ë°ë“œ')||t.includes('ë§ˆì¼€íŒ…')) return '#eab308';
    if(t.includes('íšŒì˜')||t.includes('ì´íšŒ')) return '#a855f7';
    return '#2563eb';
  }

  // ===== Data =====
  let CUR = new Date();
  let focusDate = new Date();
  let events = [
    { id:'e1', date: toDateId(new Date()), time:'19:00', title:'í•©ì£¼ì‹¤ ì˜ˆì•½ Â· ë“œëŸ¼ & ë² ì´ìŠ¤', where:'Bë™ B101', tag:'í•©ì£¼', color:'#2563eb', repeat:{freq:'NONE'} },
    { id:'e2', date:'2025-11-14', time:'18:00', title:'12ì›” ê³µì—° ë¦¬í—ˆì„¤', where:'ëŒ€ê°•ë‹¹', tag:'ê³µì—°', color:'#ef4444', repeat:{freq:'NONE'} },
    { id:'e3', date:'2025-11-20', time:'23:59', title:'í¬ìŠ¤í„° 1ì°¨ ì‹œì•ˆ ë§ˆê°', where:'ë””ìì¸íŒ€', tag:'ë§ˆê°', color:'#eab308', repeat:{freq:'NONE'} },
    { id:'e4', date:'2025-11-05', time:'20:00', title:'ë³´ì»¬ ì„¸ì…˜ ì£¼ê°„ íŠ¸ë ˆì´ë‹', where:'Cë™ 302', tag:'ë³´ì»¬', color:'#22c55e', repeat:{freq:'WEEKLY', interval:1, until:'2026-02-28'} }
  ];

  // ===== Calendar Render =====
  function firstDayOfMonth(y, m){ return new Date(y, m, 1); }
  function daysInMonth(y, m){ return new Date(y, m+1, 0).getDate(); }

  function render(){
    const y = CUR.getFullYear();
    const m = CUR.getMonth();
    $('#title').textContent = `${y}ë…„ ${m+1}ì›”`;

    const cal = $('#cal');
    cal.innerHTML = '';

    const first = firstDayOfMonth(y,m);
    const startWeekday = first.getDay();
    const numDays = daysInMonth(y,m);

    // ì•ìª½ ë¹ˆ ì¹¸ (ì´ì „ ë‹¬)
    const prevDays = daysInMonth(y, m-1);
    for(let i=0;i<startWeekday;i++){
      const dnum = prevDays - startWeekday + 1 + i;
      cal.appendChild(dayCell(new Date(y, m-1, dnum), true));
    }
    // í˜„ì¬ ë‹¬
    for(let d=1; d<=numDays; d++){
      cal.appendChild(dayCell(new Date(y, m, d), false));
    }
    // ë’¤ìª½ ë¹ˆ ì¹¸ ì±„ìš°ê¸° (ë‹¤ìŒ ë‹¬)
    const total = startWeekday + numDays;
    const tail = (7 - (total % 7)) % 7;
    for(let d=1; d<=tail; d++){
      cal.appendChild(dayCell(new Date(y, m+1, d), true));
    }

    renderDayList(focusDate);
  }

  function getEventsForDate(dateStr){
    // ë°˜ë³µ ì´ë²¤íŠ¸ ê°„ë‹¨ í™•ì¥ (DAILY/WEEKLY/MONTHLY ì§€ì›)
    const y = CUR.getFullYear(), m = CUR.getMonth();
    const monthStart = new Date(y, m, 1);
    const monthEnd = new Date(y, m+1, 0);
    const out = [];
    for(const e of events){
      const base = new Date(e.date);
      const until = e.repeat?.until ? new Date(e.repeat.until) : null;
      const addInst = (d) => {
        const id = toDateId(d);
        if(id === dateStr) out.push({...e, date:id});
      };

      if(!e.repeat || e.repeat.freq === 'NONE'){
        if(toDateId(base) === dateStr) out.push(e);
        continue;
      }

      const freq = e.repeat.freq; const interval = Math.max(1, Number(e.repeat.interval||1));
      let cur = new Date(Math.max(monthStart, base));
      while(cur <= monthEnd){
        if(cur >= base && (!until || cur <= until)){
          if(freq==='DAILY') addInst(cur);
          else if(freq==='WEEKLY'){
            const weeks = Math.floor((cur - base)/(7*24*3600*1000));
            if(weeks % interval === 0 && cur.getDay() === base.getDay()) addInst(cur);
          } else if(freq==='MONTHLY'){
            if(cur.getDate() === base.getDate()){
              const months = (cur.getFullYear()-base.getFullYear())*12 + (cur.getMonth()-base.getMonth());
              if(months % interval === 0) addInst(cur);
            }
          }
        }
        cur = new Date(cur.getFullYear(), cur.getMonth(), cur.getDate()+1);
      }
    }
    return out.sort((a,b)=> (a.time||'') < (b.time||'') ? -1 : 1);
  }

  function dayCell(d, muted){
    const id = toDateId(d);
    const box = document.createElement('div');
    box.className = 'cell' + (muted? ' muted':'');
    const weekday = d.getDay();
    if(weekday===0) box.classList.add('sun'); // ì¼ìš”ì¼
    if(weekday===6) box.classList.add('sat'); // í† ìš”ì¼

    box.innerHTML = `<div class="d">${d.getDate()}</div>`;

    const evts = getEventsForDate(id);
    if(evts.length){
      const bullets = document.createElement('div'); bullets.className='bullets';
      evts.slice(0,3).forEach(e=>{
        const b=document.createElement('span');
        b.className='dot';
        const c = e.color || mapTagToColor(e.tag);
        b.style.backgroundColor = c;
        b.title = `${e.time||''} ${e.title}`;
        bullets.appendChild(b);
      });
      if(evts.length>3){
        const more=document.createElement('span'); more.className='more'; more.textContent = `+${evts.length-3}`;
        bullets.appendChild(more);
      }
      box.appendChild(bullets);
    }

    if(id === toDateId(new Date())) box.classList.add('today');

    box.addEventListener('click', ()=>{ focusDate = d; renderDayList(focusDate); });
    box.addEventListener('dblclick', ()=>{
      openEditor({ id:'', date:id, time:'', title:'', where:'', tag:'', color: mapTagToColor('') , repeat:{freq:'NONE', interval:1, until:''}});
    });
    return box;
  }

  function renderDayList(d){
    $('#dayTitle').textContent = `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())} ì¼ì •`;
    const list = $('#dayList');
    list.innerHTML = '';
    const evts = getEventsForDate(toDateId(d));
    if(!evts.length){
      const li = document.createElement('li'); li.textContent = 'ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.'; li.style.color = '#64748b'; list.appendChild(li); return;
    }
    evts.forEach(evt=>{
      const li = document.createElement('li');
      const color = evt.color || mapTagToColor(evt.tag);
      li.innerHTML = `
        <div class="when"><span class="swatch" style="background:${color}"></span>${evt.time||''}</div>
        <div>
          <div class="what">${evt.title}</div>
          <div class="where">${evt.where||''}</div>
        </div>
        <span class="tag">#${evt.tag||'ì¼ì •'}</span>`;
      li.addEventListener('click', ()=> openEditor(evt));
      list.appendChild(li);
    });
  }

  // ===== Editor =====
  function openEditor(evt){
    $('#f_id').value = evt.id||'';
    $('#f_date').value = evt.date|| toDateId(focusDate);
    $('#f_time').value = evt.time||'';
    $('#f_title').value = evt.title||'';
    $('#f_where').value = evt.where||'';
    $('#f_tag').value = evt.tag||'';
    $('#f_color').value = evt.color || mapTagToColor(evt.tag);

    // ì¶”ì²œ ì¹© í•˜ì´ë¼ì´íŠ¸ ë™ê¸°í™”
    $$('.color-chip').forEach(x=>{
      x.style.background = x.getAttribute('data-color');
      x.setAttribute('aria-pressed', x.getAttribute('data-color') === $('#f_color').value ? 'true' : 'false');
    });

    $('#delBtn').style.display = evt.id ? 'inline-flex':'none';
    $('#editor').showModal();
  }

  function closeEditor(){ $('#editor').close(); }

  $('#editorForm').addEventListener('submit', (e)=>{
    e.preventDefault();
    const id = $('#f_id').value || `e${Math.random().toString(36).slice(2,8)}`;
    const obj = {
      id,
      date: $('#f_date').value,
      time: $('#f_time').value,
      title: $('#f_title').value.trim(),
      where: $('#f_where').value.trim(),
      tag: $('#f_tag').value.trim(),
      color: $('#f_color').value || mapTagToColor($('#f_tag').value.trim()),
      repeat: {
        freq: $('#f_freq').value,
        interval: Math.max(1, Number($('#f_interval').value||1)),
        until: $('#f_until').value || ''
      }
    };
    const idx = events.findIndex(x=>x.id===id);
    if(idx>=0) events[idx] = obj; else events.push(obj);
    closeEditor(); render();
  });

  $('#delBtn').addEventListener('click', ()=>{
    const id = $('#f_id').value; if(!id) return;
    events = events.filter(x=>x.id!==id); closeEditor(); render();
  });

  // ìƒ‰ ì¹© í´ë¦­ ì‹œ ì»¬ëŸ¬ ì ìš©
  document.addEventListener('click', (e)=>{
    const chip = e.target.closest('.color-chip');
    if(!chip) return;
    const c = chip.getAttribute('data-color');
    $('#f_color').value = c;
    $$('.color-chip').forEach(x=>x.setAttribute('aria-pressed','false'));
    chip.setAttribute('aria-pressed','true');
  });

  // ===== Nav =====
  $('#prev').addEventListener('click', ()=>{ CUR = new Date(CUR.getFullYear(), CUR.getMonth()-1, 1); render(); });
  $('#next').addEventListener('click', ()=>{ CUR = new Date(CUR.getFullYear(), CUR.getMonth()+1, 1); render(); });
  $('#todayBtn').addEventListener('click', ()=>{ CUR = new Date(); focusDate = new Date(); render(); });
  $('#addBtn').addEventListener('click', ()=>{
    const id = toDateId(focusDate);
    openEditor({ id:'', date:id, time:'', title:'', where:'', tag:'', color: mapTagToColor(''), repeat:{freq:'NONE', interval:1, until:''} });
  });

  // ì´ˆê¸° ë Œë”
  render();
  </script>
    </section>
</body>
</html>